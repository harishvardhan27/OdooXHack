{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{Container,Typography,Box,Rating,Paper,TextField,Button}from'@mui/material';import{useAuth}from'../context/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FeedbackPage=()=>{const{eventId}=useParams();const{user}=useAuth();const navigate=useNavigate();const[event,setEvent]=useState(null);const[rating,setRating]=useState(3);const[comment,setComment]=useState('');const[loading,setLoading]=useState(true);const[submitted,setSubmitted]=useState(false);useEffect(()=>{const fetchEvent=async()=>{try{const response=await api.get(\"/events/\".concat(eventId));setEvent(response.data);}catch(error){console.error('Error fetching event:',error);}finally{setLoading(false);}};fetchEvent();},[eventId]);const handleSubmit=async e=>{e.preventDefault();try{await api.post(\"/feedback/\".concat(eventId),{rating,comment});setSubmitted(true);setTimeout(()=>navigate('/events'),2000);}catch(error){console.error('Error submitting feedback:',error);}};if(loading)return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});if(!event)return/*#__PURE__*/_jsx(Typography,{children:\"Event not found\"});return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:4,mt:4},children:submitted?/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Thank you for your feedback!\"}),/*#__PURE__*/_jsx(Typography,{children:\"You'll be redirected back to the events page shortly.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,children:[\"Feedback for: \",event.title]}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:3},children:[/*#__PURE__*/_jsx(Typography,{component:\"legend\",children:\"Rating\"}),/*#__PURE__*/_jsx(Rating,{value:rating,onChange:(e,newValue)=>setRating(newValue),size:\"large\"})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:4,label:\"Comments\",value:comment,onChange:e=>setComment(e.target.value),sx:{mb:3}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,size:\"large\",children:\"Submit Feedback\"})]})]})})});};export default FeedbackPage;","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","Container","Typography","Box","Rating","Paper","TextField","Button","useAuth","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FeedbackPage","eventId","user","navigate","event","setEvent","rating","setRating","comment","setComment","loading","setLoading","submitted","setSubmitted","fetchEvent","response","get","concat","data","error","console","handleSubmit","e","preventDefault","post","setTimeout","children","maxWidth","elevation","sx","p","mt","textAlign","variant","gutterBottom","title","component","onSubmit","mb","value","onChange","newValue","size","fullWidth","multiline","rows","label","target","type"],"sources":["E:/communitypulse/frontend/src/pages/FeedbackPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, Typography, Box, Rating, Paper, TextField, Button } from '@mui/material';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../services/api';\r\n\r\nconst FeedbackPage = () => {\r\n  const { eventId } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [event, setEvent] = useState(null);\r\n  const [rating, setRating] = useState(3);\r\n  const [comment, setComment] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitted, setSubmitted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchEvent = async () => {\r\n      try {\r\n        const response = await api.get(`/events/${eventId}`);\r\n        setEvent(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching event:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchEvent();\r\n  }, [eventId]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await api.post(`/feedback/${eventId}`, { rating, comment });\r\n      setSubmitted(true);\r\n      setTimeout(() => navigate('/events'), 2000);\r\n    } catch (error) {\r\n      console.error('Error submitting feedback:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <Typography>Loading...</Typography>;\r\n  if (!event) return <Typography>Event not found</Typography>;\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Paper elevation={3} sx={{ p: 4, mt: 4 }}>\r\n        {submitted ? (\r\n          <Box textAlign=\"center\">\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Thank you for your feedback!\r\n            </Typography>\r\n            <Typography>\r\n              You'll be redirected back to the events page shortly.\r\n            </Typography>\r\n          </Box>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Feedback for: {event.title}\r\n            </Typography>\r\n            \r\n            <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n              <Box sx={{ mb: 3 }}>\r\n                <Typography component=\"legend\">Rating</Typography>\r\n                <Rating\r\n                  value={rating}\r\n                  onChange={(e, newValue) => setRating(newValue)}\r\n                  size=\"large\"\r\n                />\r\n              </Box>\r\n              \r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={4}\r\n                label=\"Comments\"\r\n                value={comment}\r\n                onChange={(e) => setComment(e.target.value)}\r\n                sx={{ mb: 3 }}\r\n              />\r\n              \r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                fullWidth\r\n                size=\"large\"\r\n              >\r\n                Submit Feedback\r\n              </Button>\r\n            </Box>\r\n          </>\r\n        )}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FeedbackPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}