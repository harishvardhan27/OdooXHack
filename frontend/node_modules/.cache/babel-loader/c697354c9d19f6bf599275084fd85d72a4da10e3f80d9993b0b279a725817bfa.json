{"ast":null,"code":"import{Card,CardContent,Typography,Button,Box,LinearProgress,Chip}from'@mui/material';import{HowToVote,Poll}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PollCard=_ref=>{let{poll,onVote}=_ref;const options=JSON.parse(poll.options);const totalVotes=options.reduce((sum,opt)=>sum+(opt.votes||0),0);const[selectedOption,setSelectedOption]=useState(null);const handleVote=()=>{if(selectedOption!==null){onVote(poll.id,options[selectedOption].text);}};return/*#__PURE__*/_jsx(Card,{sx:{mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Poll,{color:\"primary\",sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:poll.question}),!poll.is_active&&/*#__PURE__*/_jsx(Chip,{label:\"Closed\",size:\"small\",sx:{ml:1}})]}),options.map((option,index)=>/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:0.5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:option.text}),totalVotes>0&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[Math.round(option.votes/totalVotes*100),\"%\"]})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:totalVotes>0?option.votes/totalVotes*100:0,sx:{height:8,borderRadius:4}})]},index)),poll.is_active&&/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:\"Select your vote:\"}),options.map((option,index)=>/*#__PURE__*/_jsx(Button,{variant:selectedOption===index?\"contained\":\"outlined\",size:\"small\",sx:{mr:1,mb:1},onClick:()=>setSelectedOption(index),children:option.text},index)),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(HowToVote,{}),disabled:selectedOption===null,onClick:handleVote,sx:{mt:1},children:\"Vote\"})]})]})});};export default PollCard;","map":{"version":3,"names":["Card","CardContent","Typography","Button","Box","LinearProgress","Chip","HowToVote","Poll","jsx","_jsx","jsxs","_jsxs","PollCard","_ref","poll","onVote","options","JSON","parse","totalVotes","reduce","sum","opt","votes","selectedOption","setSelectedOption","useState","handleVote","id","text","sx","mb","children","display","alignItems","color","mr","variant","question","is_active","label","size","ml","map","option","index","justifyContent","Math","round","value","height","borderRadius","mt","onClick","startIcon","disabled"],"sources":["E:/communitypulse/frontend/src/components/PollCard.jsx"],"sourcesContent":["import { Card, CardContent, Typography, Button, Box, LinearProgress, Chip } from '@mui/material';\r\nimport { HowToVote, Poll } from '@mui/icons-material';\r\n\r\nconst PollCard = ({ poll, onVote }) => {\r\n  const options = JSON.parse(poll.options);\r\n  const totalVotes = options.reduce((sum, opt) => sum + (opt.votes || 0), 0);\r\n  const [selectedOption, setSelectedOption] = useState(null);\r\n\r\n  const handleVote = () => {\r\n    if (selectedOption !== null) {\r\n      onVote(poll.id, options[selectedOption].text);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card sx={{ mb: 2 }}>\r\n      <CardContent>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\r\n          <Poll color=\"primary\" sx={{ mr: 1 }} />\r\n          <Typography variant=\"h6\">{poll.question}</Typography>\r\n          {!poll.is_active && <Chip label=\"Closed\" size=\"small\" sx={{ ml: 1 }} />}\r\n        </Box>\r\n        \r\n        {options.map((option, index) => (\r\n          <Box key={index} sx={{ mb: 1 }}>\r\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\r\n              <Typography variant=\"body2\">\r\n                {option.text}\r\n              </Typography>\r\n              {totalVotes > 0 && (\r\n                <Typography variant=\"body2\">\r\n                  {Math.round((option.votes / totalVotes) * 100)}%\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n            <LinearProgress \r\n              variant=\"determinate\" \r\n              value={totalVotes > 0 ? (option.votes / totalVotes) * 100 : 0} \r\n              sx={{ height: 8, borderRadius: 4 }}\r\n            />\r\n          </Box>\r\n        ))}\r\n        \r\n        {poll.is_active && (\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>Select your vote:</Typography>\r\n            {options.map((option, index) => (\r\n              <Button\r\n                key={index}\r\n                variant={selectedOption === index ? \"contained\" : \"outlined\"}\r\n                size=\"small\"\r\n                sx={{ mr: 1, mb: 1 }}\r\n                onClick={() => setSelectedOption(index)}\r\n              >\r\n                {option.text}\r\n              </Button>\r\n            ))}\r\n            <Button\r\n              variant=\"contained\"\r\n              startIcon={<HowToVote />}\r\n              disabled={selectedOption === null}\r\n              onClick={handleVote}\r\n              sx={{ mt: 1 }}\r\n            >\r\n              Vote\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PollCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}